{"version":3,"sources":["webpack://orev/./src/goodbye.js"],"names":["button","document","getElementById","checkbox","pDelete","aDownload","subjID","URL","location","href","searchParams","get","querySelector","addEventListener","disabled","checked","event","preventDefault","innerHTML","date","Date","safe","ID","deleteData","timestamp","toISOString","epoch","getTime","fetch","method","headers","body","JSON","stringify","data","fname","then","response","json","console","log","catch","error","capture","once","window","open"],"mappings":"yBAEA,MAAMA,EAASC,SAASC,eAAe,eACjCC,EAAWF,SAASC,eAAe,oBACnCE,EAAUH,SAASC,eAAe,YAClCG,EAAYJ,SAASC,eAAe,cACpCI,EAAS,IAAIC,IAAIN,SAASO,SAASC,MAAMC,aAAaC,IAAI,MAMhEV,SACGW,cAAc,iBACdC,iBAAiB,SANE,KACpBb,EAAOc,UAAYX,EAASY,WA2C9Bf,EAAOa,iBAAiB,SAlBIG,IAC1BA,EAAMC,iBAENb,EAAQc,UAAY,yDAEpB,MAAMC,EAAO,IAAIC,KAtBnB,IAAsBC,EAAMC,EAAND,EAwBL,CAEbf,OAAQ,IAAIC,IAAIN,SAASO,SAASC,MAAMC,aAAaC,IAAI,MACzDY,YAAY,EACZC,UAAWL,EAAKM,cAChBC,MAAOP,EAAKQ,WA7BYL,EA+BT,SAAShB,IA9B1BsB,MAAM,gBAAiB,CACrBC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CAAEC,KAAMF,KAAKC,UAAUZ,GAAOc,MAAOb,MAEzDc,MAAMC,GAAaA,EAASC,SAC5BF,MAAMF,IACLK,QAAQC,IAAI,WAAYN,MAEzBO,OAAOC,IACNH,QAAQG,MAAM,SAAUA,QAsBuB,CACnDC,SAAS,EACTC,MAAM,IAQRvC,EAAUQ,iBAAiB,SAJC,KAC1BgC,OAAOC,KAAK,uBAG2C,CAAEH,SAAS,I","file":"goodbye.js","sourcesContent":["import './css/landingpages.css';\n\nconst button = document.getElementById('confirm-btn');\nconst checkbox = document.getElementById('confirm-checkbox');\nconst pDelete = document.getElementById('p-delete');\nconst aDownload = document.getElementById('a-download');\nconst subjID = new URL(document.location.href).searchParams.get('ID');\n\nconst handleChecked = () => {\n  button.disabled = !checkbox.checked;\n};\n\ndocument\n  .querySelector('.mdc-checkbox')\n  .addEventListener('click', handleChecked);\n\n// function for response logging, creating json file on server\nfunction downloadData(safe, ID) {\n  fetch('data/data.php', {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ data: JSON.stringify(safe), fname: ID }),\n  })\n    .then((response) => response.json())\n    .then((data) => {\n      console.log('Success:', data);\n    })\n    .catch((error) => {\n      console.error('Error:', error);\n    });\n}\n\nconst handleConfirmClick = (event) => {\n  event.preventDefault();\n\n  pDelete.innerHTML = '<strong>Wir werden Ihre Daten l√∂schen. Danke!</strong>';\n\n  const date = new Date();\n\n  const toSave = {\n    // get ID out of URL parameter\n    subjID: new URL(document.location.href).searchParams.get('ID'),\n    deleteData: true,\n    timestamp: date.toISOString(),\n    epoch: date.getTime(),\n  };\n  const toSaveID = `DELETE${subjID}`;\n  downloadData(toSave, toSaveID);\n};\n\nbutton.addEventListener('click', handleConfirmClick, {\n  capture: false,\n  once: true,\n});\n\n// define what happens on button click\nconst handleDownloadClick = () => {\n  window.open('images/thanks.pdf');\n};\n\naDownload.addEventListener('click', handleDownloadClick, { capture: false });\n"],"sourceRoot":""}